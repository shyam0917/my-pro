function ModalWindow(a){var b=$("body");const c=$("#header");let d;var e,f,g=null,h=0,i=null,j=0,k=0,l=0,m=0,n=0,o=0,p=20,q=this,r=function(a){return q.onResize(a)},s=function(a){return q.onKeyUp(a)};this.init=function(){return f=b.find("#mContainer"),0<f.length?void(e=b.find("#leanOverlay")):void(b.append($("<div id=\"leanOverlay\"></div>")),b.append($("<div id=\"mContainer\"></div>")),e=$("#leanOverlay"),f=$("#mContainer"))},this.init(),a=$.extend({top:100,overlay:.5,closeButton:null,isBlocking:!1,isConfirming:!1,isAlert:!1,onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){}},a),"undefined"!=typeof a.modalID&&(g=a.modalID),this.bindOnClose=function(b){return a.onClose=b,this},this.getModalNode=function(){return i},this.show=function(){$(window).on("mousewheel",function(a){p.calcShift(a.deltaFactor*a.deltaY),p.reposition()}),h=0,j=0,k=0,l=0,m=0,n=0,o=0;const p=this;var q=$.Deferred();if(f.click(function(b){f.attr("id")===$(b.target).attr("id")&&!0!==a.isBlocking&&p.close()}),d=c.attr("style"),"undefined"==typeof d&&(d=""),"function"==typeof a.onBeforeOpen&&a.onBeforeOpen(this),i="#loginPopUp"!=g&&"#requestAppModal"!=g&&"#previewModal"!=g&&"#confirmWindow"!=g&&"#abuseModal"!=g?$(g).clone():$(g),i.addClass("cloned"),-1==g.lastIndexOf(".cloned")&&(g+=".cloned"),0==i.length)return q.resolve(),console.error("ModalWindow: Selector modalID: "+g+" is not found in the DOM"),q;h=$(document).scrollTop(),0<f.children(g).length&&("#CareersModal"==g||"#videoWindow"==g)&&f.children(g).remove(),i.attr("data-shown","true"),f.append(i),f.find(g).find("input").prop("disabled",""),null!==a.closeButton&&$(g+" "+a.closeButton).click(function(){p.close()});var t=b.width();b.height($(window).height()).css({overflow:"hidden",position:"relative"}).scrollTop(h);var u=b.width(),v=u-t;return b.css({"margin-right":v+"px"}),c.css({"padding-right":v+"px"}),f.css({display:"block",height:$(window).height(),left:0,width:"100%",position:"fixed",overflow:"auto",top:0,bottom:0,"z-index":350}),j=i.outerHeight(),k=i.outerWidth(),e.css({display:"block",opacity:0}),e.fadeTo(200,a.overlay),$(window).height()>=j+16?(l="50%",m=-(j/2)+"px",i.hasClass("no-translate-y")&&i.removeClass("no-translate-y")):(l=0,m="20px",n="20px",i.hasClass("preview--course")&&i.addClass("no-translate-y")),i.css({display:"block",position:"absolute",opacity:0,"z-index":"auto",left:"50%","margin-left":-(k/2)+"px",top:l,"margin-top":m,"margin-bottom":n}),$(window).bind("orientationchange resize",r),$(document).bind("keyup",s),i.fadeTo(200,1,function(){"function"==typeof a.onOpen&&a.onOpen(this),q.resolve(p)}),q},this.onRepositionModal=function(a){h=0,j=0,k=0,l=0,m=0,n=0,o=0,j=a.outerHeight(),k=a.outerWidth(),$(window).height()>=j+16?(l="50%",m=-(j/2)+"px",a.hasClass("no-translate-y")&&a.removeClass("no-translate-y")):(l=0,m="20px",n="20px",a.hasClass("preview--course")&&a.addClass("no-translate-y")),a.css({display:"block",position:"absolute","z-index":"auto",left:"50%","margin-left":-(k/2)+"px",top:l,"margin-top":m,"margin-bottom":n})},this.onResize=function(){var a=parseInt($(window).width()),b=parseInt($(window).height())-16-44-16,c=$(g);j=c.outerHeight(),k=c.outerWidth(),$(window).height()>=j+16?(l="50%",m="15px",c.hasClass("preview--course")&&c.hasClass("no-translate-y")&&c.removeClass("no-translate-y")):(l="0%",m="20px",n="20px",c.hasClass("preview--course")&&!c.hasClass("no-translate-y")&&c.addClass("no-translate-y")),0!=f.height()&&f.css({height:$(window).height(),left:0,width:"100%"}),c.css({top:l,"margin-left":-(k/2)+"px","margin-top":m,"margin-bottom":n,left:"50%"})},this.onKeyUp=function(b){return!((13!==b.which||!0!==a.isAlert)&&(27!==b.which||!0===a.isBlocking))&&(b.preventDefault(),this.close(),!0)},this.close=function(){return $(window).unbind("orientationchange resize",r),$(window).off("mousewheel"),$(document).unbind("keyup",s),1<f.children("[data-shown=\"true\"]").length?(f.children(g).find("[rel^=\"text\"]").empty(),f.children().find("input").prop("disabled",""),f.children(g).find("[rel*=\"\"]").unbind("click"),f.children(g).css("display","none"),f.children(g).attr("data-shown","false"),!1):void(f.children(g).attr("data-shown","false"),f.unbind("click"),null!==a.closeButton&&$(g+" "+a.closeButton).unbind("click"),"function"==typeof a.onBeforeClose&&a.onBeforeClose(this),e.fadeOut(200),f.css({display:"none"}),$(g).css({display:"none"}),"#confirmWindow.cloned"!=g&&"#abuseModal.cloned"!=g&&$(g).remove(),c.attr("style",d),b.attr("style",""),"function"==typeof a.onClose&&a.onClose(this))},this.bind=function(a,b){if("string"==typeof a&&(a=$(a)[0]),"undefined"==typeof b&&(b=$(a).attr("href"),"undefined"==typeof b&&(b=$(a).attr("data-modal-id"))),"undefined"==typeof b)return this;g=b;const c=this;return $(a).bind("click",function(a){a.preventDefault(),c.show()}),this},this.reposition=function(){var a=this.defineModalContent();return a.hasClass("content_courses")||a.css({marginTop:o}).css({}),this},this.calcShift=function(a){var b=this.defineModalContent().outerHeight()+p,c=$(window).height(),d=b-c;return 0>=d?void(o=0):void(o+=a,o<-d&&(o=-d),o>p&&(o=p))},this.defineModalContent=function(){return $(g).find(".content")}}

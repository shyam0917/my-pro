function PreviewModal(a,b){const c=this;var d=new Player(a);this.modalWindow=null,this.defineSelector=function(){var a=$(b).attr("href");return("undefined"==typeof a||"#"!==a.substring(0,1))&&(a="#previewModal"),a},this.show=function(a,b,c){const d=this;return $.when(this.getjsonContent(a,"en")).then(function(e){d.getLangs().done(function(f){e.langs=d.parseLangs(e.langs,f);var g="<div id=\"previewModal\" class=\"modal modal--preview preview--course\"><a class=\"modal__close modal_close\">x</a><div class=\"modal_flex\"><div class=\"content content_courses\"><div class=\"course-video__preview\" id=\"courseVideoEmbed\"></div></div><div class=\"preview-sidebar\"><div class=\"library-item__header\"><a class=\"modal_close\">  <span class=\"library-item__title\">"+e.title+"</span></a></div><div class=\"preview-course-details\"><div class=\"preview-course-information\"><div class=\"library-item__caption\">  <div class=\"library-item__icon\"><i class=\"icon icon-author\"></i></div><span class=\"library-item__value\">"+e.author+"</span></div><div class=\"library-item__caption\"><div class=\"library-item__icon\"><i class=\"icon icon-runtime\"></i></div><span class=\"library-item__value\">"+e.trt+"</span></div><div class=\"library-item__caption\"><div class=\"library-item__icon\"><i class=\"icon icon-lessons\"></i></div><span class=\"library-item__value\">"+e.totallessons+"</span></div><div class=\"library-item__caption\"><div class=\"library-item__icon\"><i class=\"fa fa-globe fa-lg\"></i></div><span class=\"library-item__value\">"+e.langs+"</span></div></div><div class=\"library-item__description\">"+e.description+"</div></div>  </div>  </div></div>";$("#mContainer").append(g),d.showModal(),d.renderPlayer(a,b,c)}).then(function(){})})},this.getjsonContent=function(a,b){var c=$.Deferred(),d=config.CDNPortal+"opencontent/courses/details/"+a+"_"+b+"--v"+Date.now()+".json";return $.ajax({url:d,cache:!1,dataType:"json"}).done(function(a){a.langs=a.langs.filter(function(a){if("ar"!=a)return a}),c.resolve(a)}).fail(function(a){console.log(a)}),c},this.getLangs=function(){var a=$.Deferred();return $.getJSON("https://staticcontent.knowledgecity.com/json/langs.json",function(b){a.resolve(b)}),a},this.parseLangs=function(a,b){var c=b.map(function(a){return a.codeISO6391}),d=a.map(function(a){var d=c.indexOf(a);if(~d)return b[d].native}).join(", ");return d},this.showModal=function(){return this.modalWindow=new ModalWindow({modalID:this.defineSelector(),top:100,overlay:.4,closeButton:".modal_close",onOpen:function(){},onClose:function(){$(c.defineSelector()).remove(),delete localStorage.captionLang}}),this.modalWindow.show()},this.renderPlayer=function(a,b,c){if("howitworks"===a){$("#courseVideoEmbed").html("<video crossdomain crossorigin=\"anonymous\" id=\"howvideo\" class=\"video-js vjs-default-skin video-static video-permanent-bar\" controls preload=\"auto\" width=\"100%\" autoplay=\"true\"><source src=\""+b+"\" type=\"video/mp4\"></video>");videojs(document.getElementById("howvideo"),{autoplay:!0,controls:!0,aspectRatio:"16:9"});return}var e=d.show(a,b,"courseVideoEmbed",{autostart:!0,captiontype:"alternative",rewactionstop:!1,transcriptalt:!1,disableCaptions:!1,displaycaptionbydefault:"none",placevideo:"course",playbackRates:[.25,.5,.75,1,1.25,1.5,2]},{captions:["en","es"],_extend:"captions"});e.fail(function(){window.history.pushState({},"",c||"/"),location.reload()})},this.setHandlers=function(){},this.showProgressOverlay=function(){$(this.defineSelector()).find(".progressOverlay").removeClass("hidden")},this.hideProgressOverlay=function(){$(this.defineSelector()).find(".progressOverlay").addClass("hidden")}}
